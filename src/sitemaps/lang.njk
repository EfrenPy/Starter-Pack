---js
{
  pagination: { data: "site.languages", size: 1, alias: "langObj" },
  permalink: (data) => `/sitemaps/${data.langObj.code}.xml`,
  layout: false,
  eleventyExcludeFromCollections: true
}
---
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
        xmlns:xhtml="http://www.w3.org/1999/xhtml">
{%- for item in collections.all %}
{%- if item.url and not item.data.noindex and not item.data.eleventyExcludeFromCollections and item.data.lang == langObj.code and item.url != '/404.html' and item.url != '/offline.html' and item.url != '/index.html' and item.url != '/' %}
  <url>
    <loc>{{ item.url | absoluteUrl(site.url) }}</loc>
    {%- if item.data.dateModified %}<lastmod>{{ item.data.dateModified }}</lastmod>{% endif %}
    {%- for l in site.languages %}
    <xhtml:link rel="alternate" hreflang="{{ l.code }}" href="{{ item.url | toLang(item.data.lang, l.code) | absoluteUrl(site.url) }}" />
    {%- endfor %}
    <xhtml:link rel="alternate" hreflang="x-default" href="{{ item.url | toLang(item.data.lang, 'en') | absoluteUrl(site.url) }}" />
  </url>
{%- endif %}
{%- endfor %}
</urlset>
